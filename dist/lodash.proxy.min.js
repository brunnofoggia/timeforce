import _ from"lodash";import{slice}from"./helpers.min.js";var addMethod=function(t,e,n,i){switch(e){case 1:return function(){return t[n](this[i])};case 2:return function(e){return t[n](this[i],e)};case 3:return function(e,o){return t[n](this[i],cb(e,this),o)};case 4:return function(e,o,r){return t[n](this[i],cb(e,this),o,r)};default:return function(){var e=slice.call(arguments);return e.unshift(this[i]),t[n].apply(t,e)}}},addLodashMethods=function(t,e,n,i){_.each(n,(function(n,o){e[o]&&(t.prototype[o]=addMethod(e,n,o,i))}))},cb=function(t,e){return _.isFunction(t)?t:_.isObject(t)&&!e._isModel(t)?modelMatcher(t):_.isString(t)?function(e){return e.get(t)}:t},modelMatcher=function(t){var e=_.matches(t);return function(t){return e(t.attributes)}},collectionMethods={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,takeRight:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,mapKeys:3,findIndex:3,findLastIndex:3},modelMethods={keys:1,values:1,toPairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},mix=function(t,e){_.each([[t,collectionMethods,"models"],[e,modelMethods,"attributes"]],(function(t){var e=t[0],n=t[1],i=t[2];e.mixin=function(t){var n=_.reduce(_.functions(t),(function(t,e){return t[e]=0,t}),{});addLodashMethods(e,t,n,i)},addLodashMethods(e,_,n,i)}))};export{addMethod,addLodashMethods,cb,modelMatcher,mix};